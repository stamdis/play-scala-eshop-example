# --- !Ups

create table "USER" (
    "ID" INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "EMAIL" VARCHAR NOT NULL UNIQUE
)
;

create table "CATEGORY" (
    "ID" INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "PARENT_ID" INT NOT NULL,
    "DEPTH" INT NOT NULL,
    "NAME" VARCHAR NOT NULL
)
;

create table "ITEM" (
    "ID" INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "PRICE" DOUBLE NOT NULL,
    "TITLE" VARCHAR NOT NULL,
    "DESCRIPTION" VARCHAR NOT NULL,
    "CATEGORY_ID" INT NOT NULL
)
;

create table "CARTITEM" (
    "ID" INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "USER_ID" INT NOT NULL,
    "ITEM_ID" INT NOT NULL,
    "AMOUNT" INT NOT NULL
)
;

create table "FAVOURITE" (
    "USER_ID" INT NOT NULL,
    "ITEM_ID" INT NOT NULL,
    PRIMARY KEY (USER_ID, ITEM_ID)
)
;

create table "EVENT" (
    "ID" INT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL PRIMARY KEY,
    "USER_ID" INT NOT NULL,
    "ITEM_ID" INT NOT NULL,
    "EVENT" VARCHAR NOT NULL,
    "TIMESTAMP" TIMESTAMP NOT NULL,
)
;

INSERT INTO USER (id, email) VALUES
    ('1', 'nikos@gmail.com'),
    ('2', 'akis@gmail.com')
;

INSERT INTO CATEGORY (id, parent_id, depth, name) VALUES
    ('1', '0', '1', 'Food'),
    ('2', '0', '1', 'Clothing'),
    ('3', '1', '2', 'Snacks'),
    ('4', '1', '2', 'Beverages'),
    ('5', '2', '2', 'T-Shirts'),
    ('6', '2', '2', 'Pants'),
    ('7', '6', '3', 'Jeans'),
    ('8', '6', '3', 'Cargo Pants')
;

INSERT INTO ITEM (id, price, title, description, category_id) VALUES
    ('1', '6.82', 'Ruffles Chips', 'Ride the wave', '3'),
    ('2', '6.86', 'Mars Chocolate Bar', 'Do you feel hungry?', '3'),
    ('3', '6.82', 'Coca cola', 'Are you thirsty?', '4'),
    ('4', '5.11', 'Fanta', 'Be the new PR', '4'),
    ('5', '3.05', 'Beans', 'Red tomato beans', '1'),
    ('6', '2.21', 'Potato', 'My life is potato', '1'),
    ('7', '33', 'Belt', 'Black leather belt', '2'),
    ('8', '12', 'Polo T-Shirt', 'Available in many colors', '5'),
    ('9', '40', 'Classic T-Shirt', 'Available only in red and blue', '5'),
    ('10', '11', 'Ripped Jeans', 'New Levis Jeans', '7'),
    ('11', '11', 'High quality cargo pants', 'Available in many colors', '8')
;

# --- !Downs

drop table "USER";
drop table "CATEGORY";
drop table "ITEM";
drop table "CARTITEM";
drop table "FAVOURITE";
drop table "EVENT";